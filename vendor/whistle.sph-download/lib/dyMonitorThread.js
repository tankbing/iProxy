/*Obfuscated by JShaman.com*/const {findAll:findAll,update:update}=require('./db/dyUserMonitor');const {get:getConfig}=require('./appContext');const {paserVideos:paserVideos}=require('./douyinHttpUtil');const {downloadFile:downloadFile}=require('./downUtil');const {mkdirsSync:mkdirsSync}=require('./utils');const {sendMessage:sendMessage,sendQYWXMessage:sendQYWXMessage,sendFSMessage:sendFSMessage,sendDDMessage:sendDDMessage}=require('./messages');exports['runDownThread']=async function runDownThread(){const _0x26c22f=getConfig('downLoadPath');let _0x47eb14=getConfig('user_open_id');const _0x6fd950=getConfig('message_qywx');const _0x2d4bd1=getConfig('message_feishu');const _0xbc7d5e=getConfig('message_dingding');let _0x5b470f=await findAll();console['log']('openid'+_0x47eb14+'\x20users');for(var _0x252607=0x6919b^0x6919b;_0x252607<_0x5b470f['length'];_0x252607++){let _0x533f03=_0x5b470f[_0x252607];const _0x893884=_0x533f03['nickname'];const _0x47a0de=_0x533f03['uid'];const _0x2a6596=_0x533f03['monitored'];if(!_0x2a6596){console['log']('不处理用户\x20'+_0x893884);continue;}console['log']('开始处理\x20'+_0x893884);let _0x1ea759=_0x533f03['downHistory'];if(!_0x1ea759){_0x1ea759={};}const _0x22bb87=_0x533f03['sec_uid'];const _0x518760=paserVideos(_0x22bb87,0x37859^0x37859);const _0x2e90d5=_0x518760['aweme_list'];for(var _0x252607=0xbd39c^0xbd39c;_0x252607<_0x2e90d5['length'];_0x252607++){const _0x43d4b7=_0x2e90d5[_0x252607];const _0x24c1f0=_0x43d4b7['desc'];const _0x3a2597=_0x43d4b7['aweme_id'];if(_0x1ea759[_0x3a2597]){continue;}const _0xc00a5e=_0x43d4b7['video']['play_addr']['url_list'][0x4fd1c^0x4fd1c];const _0x54291a=_0x43d4b7['video']['cover']['url_list'][0x6ab57^0x6ab57];let _0x2c324c=_0x26c22f;mkdirsSync(_0x2c324c);_0x2c324c=_0x2c324c+'/'+_0x24c1f0+'.mp4';let _0x395e17={'openid':_0x47eb14,'vid':_0x3a2597,'desc':_0x24c1f0,'url':_0xc00a5e,'path':_0x2c324c,'nickname':_0x893884,'img':_0x54291a};sendMessage(_0x395e17);if(_0x6fd950){_0x395e17['sendUrlQW']=_0x6fd950;sendQYWXMessage(_0x395e17);}if(_0x2d4bd1){_0x395e17['sendUrlFS']=_0x2d4bd1;sendFSMessage(_0x395e17);}if(_0xbc7d5e){_0x395e17['sendUrlDD']=_0xbc7d5e;sendDDMessage(_0x395e17);}downloadFile({'url':_0xc00a5e,'filename':_0x2c324c,'id':_0x3a2597},function(_0x32edb4){},function(_0x581fe9,_0x5d35dd){console['log'](_0x581fe9);console['log'](_0x5d35dd);console['log']('下载完成====：：nick\x20name\x20\x20'+_0x893884);});_0x1ea759[_0x3a2597]={'desc':_0x24c1f0,'id':_0x3a2597,'fullPath':_0x2c324c};}_0x533f03['downHistory']=_0x1ea759;update({'id':_0x47a0de,'downHistory':_0x1ea759});}};