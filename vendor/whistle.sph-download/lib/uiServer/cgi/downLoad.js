/*Obfuscated by JShaman.com*/const path=require('path');const {insert:insert,page:pageData,findAndDown:findAndDown}=require('../../db/persistent');const {backdomain:backdomain}=require('./../../consta');const request=require('sync-request');module['exports']=async _0x5bfda0=>{const {id:_0x3a0deb,name:_0x151fc1}=_0x5bfda0['request']['body'];const {localStorage:_0x1cdd6a}=_0x5bfda0['req'];const _0x380baf=_0x1cdd6a['getProperty']('fullDownLoadCode');const _0x15bcbd=_0x1cdd6a['getProperty']('videoDownLoadPath');let _0x54846f={};try{let _0x179119=_0x1cdd6a['getProperty']('user_open_id');if(_0x179119){const _0x40a8e6=request('GET',backdomain()+'/sph/hg/user/'+_0x179119)['getBody']()['toString']();const _0x424e35=JSON['parse'](_0x40a8e6);const _0x40d520=_0x424e35['body'];if(!_0x40d520['expired']){_0x54846f=await findAndDown(_0x3a0deb,_0x380baf,_0x15bcbd,_0x151fc1,0xb86eb^0xb86eb);if(_0x54846f['success']){_0x54846f['message']='已加入下载列表，去下载目录查看吧';}else{_0x54846f['message']='未知下载错误，请重试，或联系作者';}}else{_0x54846f['success']=0x5c00d^0x5c00f;_0x54846f['message']=_0x40d520['message'];}}else{_0x54846f['success']=0x8147d^0x8147f;_0x54846f['message']='请重新输入验证码进行验证';}}catch(_0x1948f1){console['log'](_0x1948f1);_0x54846f['success']=0xaab6a^0xaab68;_0x54846f['message']='下载失败请稍后重试';}_0x5bfda0['body']={'data':_0x54846f};};