/*Obfuscated by JShaman.com*/const path=require('path');const {insert:insert,page:pageData,findAndDown:findAndDown}=require('../../db/persistent');const {backdomain:backdomain}=require('./../../consta');const request=require('sync-request');module['exports']=async _0x557c4b=>{const {id:_0x365fc2,name:_0x29ab6a}=_0x557c4b['request']['body'];const {localStorage:_0x446b7c}=_0x557c4b['req'];const _0x26950a=_0x446b7c['getProperty']('fullDownLoadCode');const _0x3f9edf=_0x446b7c['getProperty']('videoDownLoadPath');let _0x513c44={};try{let _0x197877=_0x446b7c['getProperty']('user_open_id');if(_0x197877){const _0xc4d7d8=request('GET',backdomain()+'/sph/hg/user/'+_0x197877)['getBody']()['toString']();const _0x1254ee=JSON['parse'](_0xc4d7d8);const _0x1e945e=_0x1254ee['body'];if(!_0x1e945e['expired']){_0x513c44=await findAndDown(_0x365fc2,_0x26950a,_0x3f9edf,_0x29ab6a,0xa29b9^0xa29b9);if(_0x513c44['success']){_0x513c44['message']='已加入下载列表，去下载目录查看吧';}else{_0x513c44['message']='未知下载错误，请重试，或联系作者';}}else{_0x513c44['success']=0x96a09^0x96a0b;_0x513c44['message']=_0x1e945e['message'];}}else{_0x513c44['success']=0xe622f^0xe622d;_0x513c44['message']='请重新输入验证码进行验证';}}catch(_0x3d8499){console['log'](_0x3d8499);_0x513c44['success']=0xbf901^0xbf903;_0x513c44['message']='下载失败请稍后重试';}_0x557c4b['body']={'data':_0x513c44};};